version: "3.0"

stories:

- story: extract_kpi_with_confirm
  steps:
  - intent: extract_kpi
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_convert_date
  - slot_was_set:
    - mapped_time: "202001"
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_query
  - action: action_reset_slots
  - slot_was_set:
    - place: null
  - slot_was_set:
    - DATE: null
  - slot_was_set:
    - kpi: null  
  - slot_was_set:
    - mapped_time: null
  

- story: extract_kpi_user_clarify_then_affirm
  steps:
  - intent: extract_kpi
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_convert_date
  - slot_was_set:
    - mapped_time: "202001"
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_query
  - action: action_reset_slots
  - slot_was_set:
    - place: null
  - slot_was_set:
    - DATE: null
  - slot_was_set:
    - kpi: null  
  - slot_was_set:
    - mapped_time: null  

- story: extract_kpi_user_clarify_then_deny
  steps:
  - intent: extract_kpi
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_convert_date
  - slot_was_set:
    - mapped_time: "202001"
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_query
  - action: action_reset_slots  
  - slot_was_set:
    - place: null
  - slot_was_set:
    - DATE: null
  - slot_was_set:
    - kpi: null  
  - slot_was_set:
    - mapped_time: null

- story: interactive_story_1
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - intent: extract_kpi
    entities:
    - kpi: Charging points
    - place: Berlin
    - place: Berlin
  - slot_was_set:
    - place: Berlin
  - slot_was_set:
    - kpi: Charging points
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - requested_slot: DATE
  - slot_was_set:
    - DATE: June 2020
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_convert_date
  - slot_was_set:
    - mapped_time: '202006'
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_query
  - action: action_reset_slots
  - slot_was_set:
    - place: null
  - slot_was_set:
    - kpi: null
  - slot_was_set:
    - DATE: null
  - slot_was_set:
    - mapped_time: null
  - intent: chitchat
  - action: utter_chitchat
  - intent: faq
  - action: utter_faq


