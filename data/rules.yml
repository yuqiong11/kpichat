version: "3.0"

rules:

- rule: chitchat
  steps:
  - intent: chitchat
  - action: utter_chitchat

- rule: faq
  steps:
  - intent: faq
  - action: utter_faq

- rule: reset
  steps:
  - intent: reset
  - action: action_reset_slots
  - action: action_slot_check

- rule: check_slot_input
  steps:
  - intent: check_slot_input
  - action: action_slot_check
  

- rule: Activate form
  steps:
  - intent: extract_kpi
  - action: kpi_form
  - active_loop: kpi_form

- rule: Submit form
  condition:
  - active_loop: kpi_form
  steps:
  - action: kpi_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_convert_date
  - slot_was_set:
    - mapped_time: "202001"
  wait_for_user_input: false
  # - action: utter_query_received
  # - action: action_query_confirm
  # - intent: affirm
  # - action: action_execute_query
  # - action: action_reset_slots

# - rule: Execute query
#   steps:
#   - action: action_execute_query
#   - action: action_reset_slots 


 