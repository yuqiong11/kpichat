version: "3.0"

stories:
- story: agg_query_affirm
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_store_slots
  - action: action_reset_slots_except_stored

- story: agg_query_affirm_1
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
    - max: max
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - max: max
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_store_slots
  - action: action_reset_slots_except_stored

- story: agg_query_affirm_2
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
    - min: min
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - min: min
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_store_slots
  - action: action_reset_slots_except_stored

- story: agg_query_affirm_3
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
    - avg: avg
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - avg: avg
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_store_slots
  - action: action_reset_slots_except_stored