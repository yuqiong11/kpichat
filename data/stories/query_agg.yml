version: "3.1"

stories:
- story: predefined:agg_query_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: predefined:user input agg query, 5x continue
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: predefined:user chooses service 'kpi query', 5x continue
  steps:
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_kpi_list
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: userdefined:agg_query_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: userdefined:agg_query, 3x continue, main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: pre&userdefined:user input agg query, 5x continue
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: notdefined:agg_query_user_affirm_define_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: false
  - action: action_not_found_userdefined
  - intent: affirm
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: notdefined:agg_query_user_deny_define_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: false
  - action: action_not_found_userdefined
  - intent: affirm
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: notdefined+predefined:agg_query_user_affirm_define_continue
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: false
  - action: action_not_found_userdefined
  - intent: affirm
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query


- story: (deny)predefined:agg_query_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined  
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: (deny)predefined:user input agg query, 5x continue
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: true
  - slot_was_set:
    - userdefined: false
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: (deny)userdefined:agg_query_main_menu
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_check_predefined_and_userdefined
  - slot_was_set:
    - predefined: false
  - slot_was_set:
    - userdefined: true
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart