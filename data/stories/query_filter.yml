version: "3.1"

stories:  
- story: filter_query_affirm
  steps:
  - intent: filter_query
    entities:
    - place: states
    - ge: above
    - kpi: Locations
    - DATE: now
    - CARDINAL: 500
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - ge: above
  - slot_was_set:
    - CARDINAL: 500
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: filter_query_affirm_1
  steps:
  - intent: filter_query
    entities:
    - place: states
    - le: below
    - kpi: Locations
    - DATE: now
    - CARDINAL: 500
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - le: below
  - slot_was_set:
    - CARDINAL: 500
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query

- story: (deny)filter_query_affirm
  steps:
  - intent: filter_query
    entities:
    - place: states
    - ge: above
    - kpi: Locations
    - DATE: now
    - CARDINAL: 500
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - ge: above
  - slot_was_set:
    - CARDINAL: 500
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
- story: (deny)filter_query_affirm_1
  steps:
  - intent: filter_query
    entities:
    - place: states
    - le: below
    - kpi: Locations
    - DATE: now
    - CARDINAL: 500
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - le: below
  - slot_was_set:
    - CARDINAL: 500
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query