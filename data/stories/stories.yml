version: "3.0"

stories:
- story: agg_query_with_confirm
  steps:
  - intent: agg_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query


  
- story: group_sort_query_with_confirm
  steps:
  - intent: group_sort_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_group_sort_query


- story: filter_query_with_confirm
  steps:
  - intent: filter_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query


- story: limit_query_with_confirm
  steps:
  - intent: limit_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_limit_query


- story: window_query_with_confirm
  steps:
  - intent: window_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_window_query


- story: agg_query_user_clarify_then_affirm
  steps:
  - intent: agg_query
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query


- story: group_and_filter
  steps:
  - intent: group_sort_query
  - slot_was_set:
    - place: state
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: by the end of 2022
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: state
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: by the end of 2022
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_group_sort_query
  - intent: filter_query
  - slot_was_set:
    - place: states
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - le: more than 100
  - slot_was_set:
    - CARDINAL: more than 100
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_filter_query



- story: interactive_story_1
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: action_reset_slots
  - intent: agg_query
    entities:
    - kpi: Charging points
    - place: Berlin
    - place: Berlin
  - slot_was_set:
    - place: Berlin
  - slot_was_set:
    - kpi: Charging points
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - requested_slot: DATE
  - slot_was_set:
    - DATE: June 2020
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - slot_was_set:
    - mapped_time: '202006'
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - intent: chitchat
  - action: utter_chitchat
  - action: action_reset_slots
  - intent: faq
  - action: utter_faq
  - action: action_reset_slots

- story: interactive_story_2
  steps:
  - intent: agg_query
    entities:
    - kpi: Locations
    - DATE: July 2021
    - DATE: July 2021
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: July 2021
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - requested_slot: place
  - slot_was_set:
    - place: Hamburg
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - slot_was_set:
    - mapped_time: '202107'
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - intent: agg_query
    entities:
    - min: lowest
    - kpi: Charging points
    - place: county
    - place: Bayern
    - DATE: '202103'
    - place: Bayern
    - DATE: '202103'
  - slot_was_set:
    - place: Bayern
  - slot_was_set:
    - kpi: Charging points
  - slot_was_set:
    - DATE: '202103'
  - slot_was_set:
    - min: lowest
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - slot_was_set:
    - mapped_time: '202103'
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - intent: faq
  - action: utter_faq
  - action: action_reset_slots