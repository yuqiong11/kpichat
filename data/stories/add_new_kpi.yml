version: "3.1"

stories:
- story: scenario_1_user_initiates + 3x continue
  steps:
  - intent: start_define_kpi
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: scenario_2_bot_triggers_user_affirm + 1x continue
  steps:
  - action: action_not_found_userdefined
  - intent: affirm
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: scenario_3_bot_triggers_user_deny
  steps:
  - action: action_not_found_userdefined
  - intent: deny
  - action: utter_sorry
- story: user choose service + main menu
  steps:
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart

- story: (deny)scenario_1_user_initiates + 3x continue
  steps:
  - intent: start_define_kpi
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: (deny)scenario_2_bot_triggers_user_affirm + 1x continue
  steps:
  - action: action_not_found_userdefined
  - intent: affirm
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: continue
  - action: action_reset_slots_except_service
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart
- story: (deny)user choose service + main menu
  steps:
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 5
  - action: new_kpi_form
  - active_loop: new_kpi_form
  - slot_was_set:
    - kpi_name: "Chargers per square kilometer"
  - slot_was_set:
    - kpi_definition: "number of chargingpoints / area"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: action_new_kpi_confirm
  - intent: deny
  - action: utter_ask_for_clarification
  - intent: change_slot
  - action: action_change_slot
  - action: action_query_confirm
  - intent: affirm
  - action: action_save_kpi_name_lookup
  - action: action_define_kpi_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu  
  - action: action_restart