#### This file contains tests to evaluate that your bot behaves as expected.
#### If you want to learn more, please see the docs: https://rasa.com/docs/rasa/testing-your-assistant

stories:
- story: give 1 faq + main_menu + nearby search
  steps:
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 3
  - action: action_give_faqs_finished
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 2
  - action: nearby_search_form
  - active_loop: nearby_search_form
  - slot_was_set:
    - address: "Kirchstr. 28, Berlin"
  - slot_was_set:
    - radius: 1000
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_nearby_search
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart

- story: agg + agg + group
  steps:
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: continue
  - action: action_store_slots
  - action: action_reset_slots_except_stored
  - action: utter_kpi_query
  - intent: group_sort_query
    entities:
    - kpi: "locations"
    - place: "Berlin"
    - DATE: "2021"
    - max: "highest"
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_group_sort_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart

- story: agg + main meun + nearby search
  steps:
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 1
  - action: action_kpi_list
  - action: utter_kpi_query
  - intent: agg_query
    entities:
    - place: states
    - kpi: Locations
    - DATE: now
  - slot_was_set:
    - place: states
  - slot_was_set:
    - kpi: Locations
  - slot_was_set:
    - DATE: now
  - action: action_query_classification
  - action: kpi_form
  - active_loop: kpi_form
  - slot_was_set:
    - place: "Berlin"
  - slot_was_set:
    - DATE: "2021"
  - slot_was_set:
    - kpi: "locations"
  - slot_was_set:
    - requested_slot: null 
  - active_loop: null
  - action: utter_query_received
  - action: action_query_confirm
  - intent: affirm
  - action: action_execute_agg_query
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart
  - intent: choose_service
  - action: action_service_mapping
  - slot_was_set:
    - service: 2
  - action: nearby_search_form
  - active_loop: nearby_search_form
  - slot_was_set:
    - address: "Kirchstr. 28, Berlin"
  - slot_was_set:
    - radius: 1000
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_nearby_search
  - action: action_continue_options
  - intent: main_menu
  - action: utter_main_menu
  - action: action_restart