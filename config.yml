# The config recipe.
# https://rasa.com/docs/rasa/model-configuration/
recipe: default.v1

# Configuration for Rasa NLU.
# https://rasa.com/docs/rasa/nlu/components/
language: en

pipeline:
# # No configuration for the NLU pipeline was provided. The following default pipeline was used to train your model.
# # If you'd like to customize it, uncomment and adjust the pipeline.
# # See https://rasa.com/docs/rasa/tuning-your-model for more information.
  - name: "SpacyNLP"
    model: "en_core_web_md"
    case_sensitive: False
  # - name: SpacyTokenizer
  - name: whitespace_tokenizer.MyWhitespaceTokenizer
  - name: RegexFeaturizer
  - name: LexicalSyntacticFeaturizer
  - name: CountVectorsFeaturizer
  - name: CountVectorsFeaturizer
    analyzer: char_wb
    min_ngram: 1
    max_ngram: 4
  # - name: SpacyEntityExtractor
  #   dimensions: ["CARDINAL"]
  - name: rapid_fuzzy_extractor_newkpi.RapidFuzzyEntityExtractorForNewKPI
  - name: DIETClassifier
    epochs: 50
    constrain_similarities: true
  - name: rapid_fuzzy_extractor_place.RapidFuzzyEntityExtractorForPlace
  - name: EntitySynonymMapper
  # - name: RegexEntityExtractor
  #   case_sensitive: False
  #   use_lookup_tables: True
  #   use_regexes: True
  #   "use_word_boundaries": True
  # - name: ResponseSelector
  #   epochs: 50
  #   retrieval_intent: chitchat
  #   constrain_similarities: true
  # - name: ResponseSelector
  #   epochs: 50
  #   retrieval_intent: faq 
  #   constrain_similarities: true
  - name: FallbackClassifier
    threshold: 0.25
    ambiguity_threshold: 0.01

# Configuration for Rasa Core.
# https://rasa.com/docs/rasa/core/policies/
policies:
# # No configuration for policies was provided. The following default policies were used to train your model.
# # If you'd like to customize them, uncomment and adjust the policies.
# # See https://rasa.com/docs/rasa/policies for more information.
  - name: AugmentedMemoizationPolicy
    max_history: 10
  - name: RulePolicy
  - name: TEDPolicy
    max_history: 10
    epochs: 80
    constrain_similarities: true



# # test with tensorboard
# # The config recipe.
# # https://rasa.com/docs/rasa/model-configuration/
# recipe: default.v1

# # Configuration for Rasa NLU.
# # https://rasa.com/docs/rasa/nlu/components/
# language: en

# pipeline:
# # # No configuration for the NLU pipeline was provided. The following default pipeline was used to train your model.
# # # If you'd like to customize it, uncomment and adjust the pipeline.
# # # See https://rasa.com/docs/rasa/tuning-your-model for more information.
#   - name: "SpacyNLP"
#     model: "en_core_web_md"
#     case_sensitive: False
#   - name: whitespace_tokenizer.MyWhitespaceTokenizer
#   - name: RegexFeaturizer
#   - name: LexicalSyntacticFeaturizer
#   - name: CountVectorsFeaturizer
#   - name: CountVectorsFeaturizer
#     analyzer: char_wb
#     min_ngram: 1
#     max_ngram: 4
#   - name: rapid_fuzzy_extractor_newkpi.RapidFuzzyEntityExtractorForNewKPI
#   - name: DIETClassifier
#     epochs: 150
#     constrain_similarities: true
#     number_of_transformer_layers: 2
#     # evaluate_on_number_of_examples: 50
#     # evaluate_every_number_of_epochs: 1
#     # tensorboard_log_directory: "./tensorboard"
#     # tensorboard_log_level: "epoch"
#   - name: rapid_fuzzy_extractor_place.RapidFuzzyEntityExtractorForPlace
#   - name: EntitySynonymMapper
#   # - name: RegexEntityExtractor
#   #   case_sensitive: False
#   #   use_lookup_tables: True
#   #   use_regexes: True
#   #   "use_word_boundaries": True
#   - name: ResponseSelector
#     epochs: 50
#     retrieval_intent: chitchat
#     constrain_similarities: true
#   - name: ResponseSelector
#     epochs: 50
#     retrieval_intent: faq 
#     constrain_similarities: true
#   - name: FallbackClassifier
#     threshold: 0.25
#     ambiguity_threshold: 0.01

# # Configuration for Rasa Core.
# # https://rasa.com/docs/rasa/core/policies/
# policies:
#   - name: AugmentedMemoizationPolicy
#     max_history: 10
#   - name: RulePolicy
#   - name: TEDPolicy
#     max_history: 10
#     epochs: 80
#     constrain_similarities: true


